{"_id":"node-redis-warlock","_rev":"23-3642f2bcf321b2820f3dcc474e9d4d58","name":"node-redis-warlock","description":"Battle-hardened distributed locking using redis","dist-tags":{"latest":"0.2.0"},"versions":{"0.0.2":{"name":"node-redis-warlock","version":"0.0.2","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"https://github.com/thedeveloper/warlock"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1"},"dependencies":{"node-redis-scripty":"0.0.1"},"_id":"node-redis-warlock@0.0.2","dist":{"shasum":"9763835ffca4b5324ee1e85a9d22bf78fdc1e2a1","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.0.2.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"directories":{}},"0.0.3":{"name":"node-redis-warlock","version":"0.0.3","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"https://github.com/thedeveloper/warlock"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1"},"dependencies":{"node-redis-scripty":"0.0.1"},"_id":"node-redis-warlock@0.0.3","dist":{"shasum":"0db7802a962fa1243943d600fa4cafc2de80e03c","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.0.3.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"directories":{}},"0.0.4":{"name":"node-redis-warlock","version":"0.0.4","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"https://github.com/thedeveloper/warlock"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1"},"dependencies":{"node-redis-scripty":"0.0.2"},"_id":"node-redis-warlock@0.0.4","dist":{"shasum":"d47f321829faa2f5dd001647c12ed7894c6de134","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.0.4.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"directories":{}},"0.0.5":{"name":"node-redis-warlock","version":"0.0.5","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"https://github.com/thedeveloper/warlock"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","dependencies":{"node-redis-scripty":"0.0.2"},"devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1"},"_id":"node-redis-warlock@0.0.5","dist":{"shasum":"d1506fa9ff6248a93b8b45e0326f459f03e80e02","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.0.5.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"directories":{}},"0.0.6":{"name":"node-redis-warlock","version":"0.0.6","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"https://github.com/thedeveloper/warlock"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","dependencies":{"node-redis-scripty":"0.0.3"},"devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1"},"_id":"node-redis-warlock@0.0.6","dist":{"shasum":"a9df37dea9f2863be283bcc0b1cf48b060f5961c","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.0.6.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"directories":{}},"0.0.7":{"name":"node-redis-warlock","version":"0.0.7","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"https://github.com/thedeveloper/warlock"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","dependencies":{"node-redis-scripty":"~0.0.4"},"devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1"},"_id":"node-redis-warlock@0.0.7","dist":{"shasum":"51001d0b690da7276657800075d30cca8c32bc7d","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.0.7.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"directories":{}},"0.1.1":{"name":"node-redis-warlock","version":"0.1.1","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"https://github.com/thedeveloper/warlock"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","dependencies":{"node-redis-scripty":"~0.0.4","uuid":"^1.4.1"},"devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1","async":"^0.9.0"},"_id":"node-redis-warlock@0.1.1","dist":{"shasum":"241a6bc2fc9e2b2fb295c03ea4cb42217c1367c9","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.1.1.tgz"},"_from":".","_npmVersion":"1.4.3","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"directories":{}},"0.1.2":{"name":"node-redis-warlock","version":"0.1.2","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"https://github.com/thedeveloper/warlock"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","dependencies":{"node-redis-scripty":"~0.0.4","uuid":"2.0.1"},"devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1","async":"^0.9.0"},"gitHead":"b744dbf45685021b27cab6cf70bcf43893eae574","_id":"node-redis-warlock@0.1.2","_shasum":"1fa9efecf2a2f1887ba910962c7f6c6c037bcde6","_from":".","_npmVersion":"1.4.28","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"dist":{"shasum":"1fa9efecf2a2f1887ba910962c7f6c6c037bcde6","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.1.2.tgz"},"directories":{}},"0.1.3":{"name":"node-redis-warlock","version":"0.1.3","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"git+https://github.com/thedeveloper/warlock.git"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","dependencies":{"node-redis-scripty":"~0.0.4","uuid":"2.0.1"},"devDependencies":{"should":"^3.1.3","mocha":"^1.17.1","redis":"^0.10.1","async":"^0.9.0"},"gitHead":"08e22efd8945dcec9ea5693fd916ffd260a9b7a2","_id":"node-redis-warlock@0.1.3","_shasum":"8754736e3f0b523942e755b6930b0aeace975375","_from":".","_npmVersion":"2.12.1","_nodeVersion":"0.12.7","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"dist":{"shasum":"8754736e3f0b523942e755b6930b0aeace975375","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.1.3.tgz"},"directories":{}},"0.1.4":{"name":"node-redis-warlock","version":"0.1.4","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"make test"},"repository":{"type":"git","url":"git+https://github.com/thedeveloper/warlock.git"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","dependencies":{"node-redis-scripty":"0.0.5","uuid":"^2.0.1"},"devDependencies":{"async":"^1.4.2","mocha":"^2.2.5","redis":"^0.12.1","should":"^7.0.4"},"gitHead":"04698c5fad6f54226df299734bb5334f33d43050","_id":"node-redis-warlock@0.1.4","_shasum":"a9050d0d257ff3498b6e51a097f15ed5e297479e","_from":".","_npmVersion":"2.12.1","_nodeVersion":"0.12.7","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"dist":{"shasum":"a9050d0d257ff3498b6e51a097f15ed5e297479e","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.1.4.tgz"},"directories":{}},"0.2.0":{"name":"node-redis-warlock","version":"0.2.0","description":"Battle-hardened distributed locking using redis","main":"lib/warlock.js","scripts":{"test":"mocha -R list ./test/warlock","bench":"mocha -R list ./test/bench"},"repository":{"type":"git","url":"git+https://github.com/thedeveloper/warlock.git"},"keywords":["node.js","redis","lock"],"author":{"name":"Geoff Wagstaff"},"license":"MIT","bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"homepage":"https://github.com/thedeveloper/warlock","dependencies":{"node-redis-scripty":"0.0.5","uuid":"^2.0.1"},"devDependencies":{"async":"^1.5.1","mocha":"^2.3.4","redis":"^2.4.2","should":"^8.0.2"},"gitHead":"13765ee86abe008aed492fc0015a8b87f77af2b7","_id":"node-redis-warlock@0.2.0","_shasum":"56395b994c828e8e32f6aae53b93b6edfcd97990","_from":".","_npmVersion":"2.14.12","_nodeVersion":"4.2.4","_npmUser":{"name":"thedeveloper","email":"geoff@gosquared.com"},"maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"dist":{"shasum":"56395b994c828e8e32f6aae53b93b6edfcd97990","tarball":"https://registry.npmjs.org/node-redis-warlock/-/node-redis-warlock-0.2.0.tgz"},"directories":{}}},"readme":"warlock\n=======\n\n[![Travis](https://travis-ci.org/TheDeveloper/warlock.svg?branch=master)](https://travis-ci.org/TheDeveloper/warlock)\n[![Dependency Status](https://david-dm.org/thedeveloper/warlock.svg)](https://david-dm.org/thedeveloper/warlock)\n[![Join the chat at https://gitter.im/TheDeveloper/warlock](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/TheDeveloper/warlock?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n\nBattle-hardened distributed locking using redis.\n\n## Requirements\n\n* [node-redis](https://github.com/mranney/node_redis) compatible with `v0.10`\n* Redis `v2.6.12` or above. If you're running a Redis version from `v2.6.0` to `v2.6.11` inclusive use `v0.0.7` of this module.\n\n## Install\n\n    npm install node-redis-warlock\n\n## Usage\n\n```javascript\n\nvar Warlock = require('node-redis-warlock');\nvar redis = require('redis');\n\n// Establish a redis client and pass it to warlock\nvar redis = redis.createClient();\nvar warlock = Warlock(redis);\n\n// Set a lock\nvar key = 'test-lock';\nvar ttl = 10000; // Lifetime of the lock\n\nwarlock.lock(key, ttl, function(err, unlock){\n  if (err) {\n    // Something went wrong and we weren't able to set a lock\n    return;\n  }\n\n  if (typeof unlock === 'function') {\n    // If the lock is set successfully by this process, an unlock function is passed to our callback.\n    // Do the work that required lock protection, and then unlock() when finished...\n    //\n    // do stuff...\n    //\n    unlock();\n  } else {\n    // Otherwise, the lock was not established by us so we must decide what to do\n    // Perhaps wait a bit & retry...\n  }\n});\n\n// set a lock optimistically\nvar key = 'opt-lock';\nvar ttl = 10000;\nvar maxAttempts = 4; // Max number of times to try setting the lock before erroring\nvar wait = 1000; // Time to wait before another attempt if lock already in place\nwarlock.optimistic(key, ttl, maxAttempts, wait, function(err, unlock) {});\n\n// unlock using the lock id\nvar key = 'test-lock-2';\nvar ttl = 10000;\nvar lockId;\n\nwarlock.lock(key, ttl, function(err, _, id) {\n  lockId = id;\n});\n\n// each client who knows the lockId can release the lock\nwarlock.unlock(key, lockId, function(err, result) {\n  if(result == 1) {\n    // unlocked successfully\n  }\n});\n\n```\n\n## ProTips\n\n* Read my [Distributed locks using Redis](https://engineering.gosquared.com/distributed-locks-using-redis) article and Redis' author's [A proposal for more reliable locks using Redis](http://antirez.com/news/77) to learn more about the theory of distributed locks using Redis.\n","maintainers":[{"name":"thedeveloper","email":"geoff@gosquared.com"}],"time":{"modified":"2016-01-05T09:47:52.210Z","created":"2014-03-06T21:42:34.906Z","0.0.2":"2014-03-06T21:42:34.906Z","0.0.3":"2014-03-08T19:25:52.031Z","0.0.4":"2014-03-08T19:27:43.488Z","0.0.5":"2014-03-17T17:30:00.380Z","0.0.6":"2014-03-19T16:27:15.513Z","0.0.7":"2014-06-19T17:32:16.041Z","0.1.1":"2014-08-29T20:46:32.380Z","0.1.2":"2014-12-28T17:10:12.366Z","0.1.3":"2015-08-25T13:42:49.505Z","0.1.4":"2015-08-25T14:10:00.046Z","0.2.0":"2016-01-05T09:47:52.210Z"},"homepage":"https://github.com/thedeveloper/warlock","keywords":["node.js","redis","lock"],"repository":{"type":"git","url":"git+https://github.com/thedeveloper/warlock.git"},"author":{"name":"Geoff Wagstaff"},"bugs":{"url":"https://github.com/thedeveloper/warlock/issues"},"license":"MIT","readmeFilename":"README.md","users":{"jovikao":true,"nova81":true,"stdarg":true,"hengkiardo":true},"_attachments":{},"_etag":"W/\"568b9148-3a66\"","_lastModified":"Tue, 05 Jan 2016 09:47:52 GMT"}